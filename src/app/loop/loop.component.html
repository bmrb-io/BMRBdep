<div *ngIf="(showInvalidOnly && !loop.valid) || !showInvalidOnly">
	<table class="loop">
   		<colgroup>
	      <col span="1" style="width: 2.5em;">
	   </colgroup>
		<thead>
			<tr (contextmenu)="log()">
			  <th colspan=999>
          {{loop.data[0][0].schemaValues['ADIT category view name']}}
        </th>
			</tr>
			<tr>
			 <th style="border-collapse: collapse;"></th>
			<ng-container *ngFor='let col of loop.tags; let c = index'>
			  <th *ngIf="loop.data[0][c].display == 'Y' || (loop.data[0][c].display == 'N' && showAll)"
			      [ngClass]="{'mandatory': loop.schemaValues[c]['User full view'] == 'Y', 'tag_header': true}"
	      		  (click)="activeTag = (activeTag != loop.data[0][c] ? loop.data[0][c] : null)"
	      		  >{{loop.data[0][c].schemaValues['Prompt']}}</th>
			  </ng-container>
			</tr>
		</thead>
		<tbody>
			<tr *ngFor="let row of loop.data; let r = index">
			<td><a *ngIf="r>0" class="fake_button" (click)='deleteRow(r)'>-</a></td>
			<ng-container *ngFor="let col of row; let c = index">
			  <td *ngIf="loop.data[r][c].display == 'Y' || (loop.data[r][c].display == 'N' && showAll)"
	      		  [ngClass]="{'invisible': true, 'invalid': !loop.data[r][c].valid}">
			    <app-tag [tag]='loop.data[r][c]' [unique_identifier]="'_' + loop.parent.name + '_' + r + '_' + c" (contextmenu)="loop.data[r][c].log()"></app-tag>
			  </td>
			  </ng-container>
			</tr>
			<tr>
				<td colspan=999>
				  <a class="fake_button" (click)='addRow()'>+</a>
				</td>
			</tr>

		</tbody>
	</table>


	<div *ngIf='activeTag' class='tag_info_box'>
      <b>{{activeTag.schemaValues['Prompt']}}</b>
      <p>{{activeTag.schemaValues['Interface']}}</p>
      <p *ngIf="activeTag.schemaValues['Example'] != '?'"><b>Example:</b> {{activeTag.schemaValues['Example']}}</p>
      <p><i>{{activeTag.fullyQualifiedTagName}}</i></p>
      <p *ngIf="activeTag.validationMessage" [class]="'mandatory'">{{activeTag.validationMessage}}</p>
    </div>
</div>
