
<div>
	
	<table style="width: 100%">
		<colgroup>
	       <col span="1" style="width: 20%;">
	       <col span="1" style="width: 70%;">
	    </colgroup>
    
		<thead>
			<tr>
			  <th class="category_cell_toplabel" colspan=2 *ngIf="saveframe.tags[0]"><a class="header_text">{{saveframe.tags[0].schema_values['ADIT category view name']}}</a>
			  <div style="text-align: right; float: right">
			  	<a class="fake_button line" (click)='saveframe.duplicate(); processChange()'>Duplicate</a>
				<a class="fake_button line" (click)='saveframe.duplicate(true); processChange()'>Create New</a>
				<a class="fake_button line" (click)='saveframe.parent.removeSaveframe(saveframe); processChange()'>Delete</a>
				<a class="fake_button line" [routerLink]="['/entry', saveframe.parent.entry_id, 'saveframe', saveframe.category, 'category']">View sections of this category</a>
			  </div>
			  </th>
			</tr>
		</thead>
		<tbody>
		<ng-container *ngFor="let sftag of saveframe.tags">
	      	<tr *ngIf="(sftag.schema_values['User full view'] == 'Y' || (showall && sftag.schema_values['User full view'] == 'N') || showall) && sftag.schema_values['Prompt'] != 'n/a'"
	      	    (mouseenter)="active_tag = sftag"
	      		(mouseleave)="active_tag = null" style="height: 2em;">
	      		<td [ngClass]="{'mandatory': sftag.schema_values['User full view'] == 'Y', 'tag_description': true}"
	      		    [innerHTML]="sftag.schema_values['Prompt']"
	      		    [title]="sftag.schema_values['Interface']"></td>
	      		    
	      		<td class='input_td'>
	      		  <input *ngIf="sftag.interface_type == 'standard'"
	      		         [(ngModel)]="sftag.value"
	      		         [ngClass]="{'type_error': !sftag.valid, 'sf_input': true}"
	      		         [placeholder]="sftag.schema_values['default value']"
	      		         (change)="validateTag(sftag)"
	      		         [type]="sftag.data_type">
 
	      		  <select *ngIf="sftag.interface_type == 'closed_enum'"
	      		          [(ngModel)]="sftag.value"
	      		          [ngClass]="{'type_error': !sftag.valid, 'sf_input': true}"
	      		          (change)="validateTag(sftag)">
			        <option *ngFor="let val of sftag.enums[2]" [value]="val" [ngClass]="{'type_error': !sftag.valid}">{{val}}</option>
			      </select>
			      <ng-container *ngIf="sftag.interface_type == 'open_enum'" >
				    <input [attr.list]="sftag.fqtn" 
				           [(ngModel)]="sftag.value"
				           [ngClass]="{'type_error': !sftag.valid, 'sf_input': true}"
				           [placeholder]="sftag.schema_values['default value']"
				           (change)="validateTag(sftag)"
				           />
					  <datalist [id]="sftag.fqtn"><option *ngFor="let val of sftag.enums[2]" [value]="val"></datalist>
				   </ng-container>
				   <ng-container *ngIf="sftag.interface_type == 'yes_no'" >
				   <div [ngClass]="{'type_error': !sftag.valid, 'sf_input': true}"
				        (change)="validateTag(sftag)">
				   	 Yes<input type="radio" [name]='sftag.fqtn' [(ngModel)]="sftag.value" [value]="'yes'">
  				     No<input type="radio" [name]='sftag.fqtn' [(ngModel)]="sftag.value" [value]="'no'">
  				     </div>
				   </ng-container>
		      </td>
			</tr>
		</ng-container>
		</tbody>
	</table>
	<!-- <app-loop *ngFor='let loop of saveframe.loops' [loop]='loop' [showall]='showall'></app-loop> -->
	
	<div *ngIf='active_tag' class='fixed'>
      <p><b>{{active_tag.schema_values['Interface']}}</b></p>
      <p> NMR-STAR Tag: <i>{{active_tag.fqtn}}</i></p>
      <!-- <p> Data type: {{active_tag.schema_values['BMRB data type']}}</p>-->
    </div>
    
    
</div>
	
	


<!--  
  <span class="uneditable line">save_</span><input class="sf_name" [(ngModel)]="saveframe.name" placeholder="{{saveframe.category}}">
  <table class="oneindent">
    <tr>
      <th style="width: 30%"></th>
      <th></th>                
    </tr>
    <ng-container *ngFor="let sftag of saveframe.tags">
      <tr class="highlight" *ngIf="sftag.value || showall">
        <td><span class="uneditable">{{schema.getValue(saveframe.tag_prefix + '.' + sftag.name, 'Prompt')}}</span></td>
        <ng-container *ngIf='sftag.name != "Sf_framecode" then normal_tag else sf_framecode'></ng-container>
        <ng-template #normal_tag>
          <td>
          <div>
            <a *ngIf='sftag.value && sftag.value.indexOf("$")==0' [routerLink]="['/entry', saveframe.getID(), 'saveframe', sftag.value.substring(1), 'name']">Jump to: </a>
            <input class="datum" style="width:80%" [(ngModel)]="sftag.value" placeholder=".">
            </div>
          </td>
        </ng-template>
        <ng-template #sf_framecode><td><input class="datum" [(ngModel)]="saveframe.name" placeholder="."></td></ng-template>
        
      </tr>
    </ng-container>
  </table>
  <app-loop *ngFor='let loop of saveframe.loops' [loop]='loop' [showall]='showall'></app-loop>
  <span class="uneditable line">save_</span>
</div>
-->

