
<div>
	
	<table style="width: 100%">
		<colgroup>
	       <col span="1" style="width: 20%;">
	       <col span="1" style="width: 70%;">
	    </colgroup>
    
		<thead>
			<tr>
			  <th *ngIf="saveframe.tags[0]"><a class="header_text">{{saveframe.tags[0].schema_values['ADIT category view name']}}</a></th>
			  <th>
			  	<div style="text-align: right; float: right">
			    	<a class="fake_button line" (click)='saveframe.duplicate(); processChange()'>Duplicate</a>
				  <a class="fake_button line" (click)='saveframe.duplicate(true); processChange()'>Create New</a>
				  <a class="fake_button line" (click)='saveframe.parent.removeSaveframe(saveframe); processChange()'>Delete</a>
				  <a class="fake_button line" [routerLink]="['/entry', saveframe.parent.entry_id, 'saveframe', saveframe.category, 'category']">View sections of this category</a>
			    </div>
			  </th>
			</tr>
		</thead>
		<tbody>
		<ng-container *ngFor="let sftag of saveframe.tags">
	      	<tr *ngIf="sftag.display == 'Y' || (showall && sftag.display == 'N')"
	      	    (mouseenter)="active_tag = sftag"
	      		(mouseleave)="active_tag = null" style="height: 2em;">
	      		<td [ngClass]="{'mandatory': sftag.schema_values['User full view'] == 'Y', 'tag_description': true}"
				  	[innerHTML]="sftag.schema_values['Prompt']"
				  	[title]="sftag.schema_values['Interface']">
				</td>
				<td [ngClass]="{'invisible': true, 'invalid': !sftag.valid}">
		        	<app-tag [tag]='sftag' [unique_identifier]="'_' + saveframe.name" ></app-tag>
		        </td>
			</tr>
		</ng-container>
		</tbody>
	</table>
	<ng-container *ngFor='let loop of saveframe.loops'>
      <app-loop *ngIf="loop.display == 'Y' || (loop.display == 'N' && showall)" [loop]='loop' [showall]='showall'></app-loop>
	</ng-container>
	
	<div *ngIf='active_tag' class='tag_info_box'>
      <p><i>{{active_tag.fqtn}}</i></p>
      <p><b>{{active_tag.schema_values['Interface']}}</b></p>
      <p> Data type: {{active_tag.schema_values['BMRB data type']}}</p>
      <p> Null allowed: {{active_tag.schema_values['Nullable']}}</p>
      <p *ngIf='active_tag.validation_message' [class]="'mandatory'">{{active_tag.validation_message}}</p> 
    </div>
</div>
	

